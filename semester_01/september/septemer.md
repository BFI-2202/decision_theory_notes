# Практическое занятие — 01.09.2023

Демин Дмитрий Борисович
Почтовый ящик преподавателя: tvpm_demin@mail.ru
## Список литературы
### Основная литература

1. Мендель А.В. Модели принятия решений: учебное пособие для студентов вузов, обучающихся по направлениям «Экономика» и «Менеджмент».
2. Стронгин Р.Г. Исследование операций. Модели экономического поведения.
3. Самков Т.Л. Теория принятия решений.
4. Лавричев О.И. Теория и методы принятия решений.
5. Шикин Е.В., Шикина Г.Е. Исследование операций.
6. Вентцель Е.С. Исследование операций: задачи, принципы, методология.
7. Петросян Л.А., Зенкевич Н.А., Шевкопляс Е.В. Теория игр.
### Дополнительная литература

1. Горелик В.А. Теория принятия решений: учебное пособие для магистрантов.
2. Глухова Н.В. Теория принятия решений: учебное пособие.
3. Акамсина Н.В. и др. Методы принятия решений.
4. Бородачёв С.М. Теория принятия решений: учебное пособие.
5. Черноруцкий И.Г. Методы принятия решений.
6. Е.В. Бережная, В.И. Бережной. Математические методы моделирования экономических систем.
7. Л.В. Колобашкина. Основы теории игр. Учебное пособие.
8. Грачева М.В., Фдеева Л.Н., Черемных Ю.Н. Количественные методы в экономических исследованиях.
9. Давыдов Е.Г. Элементы исследования операций: учебное пособие.
## Теория принятия решений

**Теория принятия решений** (ТПР) это совокупность методов и моделей, предназначенных для обоснования решений, принимаемых на этапах анализа, разработки и эксплуатации сложных систем различных требований: информационных, технических, производственных, экономических и других.

ТПЛ это **аналитический подход к выбору наилучшего действия** (альтернативы) из множества альтернатив.

При принятии решений необходимо иметь **три элемента процесса выбора**:
* **Проблема** (задача), требующая решения;
* **ЛПР** (лицо, принимающее решение; может быть группой лиц), принимающее решение;
* Наличие **нескольких альтернатив**.
Без всех этих трех элементов процесс принятия решения **невозможен**.

**Альтернатива** — один из возможных способов достижения цели или один из конечных вариантов решения.
В отличие от *Исследования операций* в *ТПР* не существует «абсолютно лучшего решения». Решения являются лучшими только для конкретного *ЛПР*.

В теории принятия решений **выбор наилучшей альтернативы из всех возможных** осуществляется с помощью следующих **критериев** (**показатель привлекательности альтернатив**, но с точки зрения математики критерий — **функция на множестве альтернативных решений**, $f(x) \to max(min)$, где $f$ — критерий, $x$ — одна из альтернатив, $X$ — множество альтернатив):
* ...

**Процесс принятия решений** это преобразование исходной информации (информации состояния) в выходную информацию (которую обычно называют информацией управления).
Решение может быть как **формальным** (выраженным при помощи математических моделей), так и **творческим** (вырабатываемым при помощи скрытой работы интеллекта человека), но решение **не бывает** чисто формальным или чисто творческим.
Процесс принятия решений имеет следующую **типовую схему**:
* **Формирование альтернативных решений** (множество альтернативных решений);
* **Сравнение альтернативных решений**;
* **Выбор наилучшей альтернативы** (использование какого-то критерия);
* **Реализация выбранной альтернативы**;
* **Контроль результатов**.
Процесс принятия решений **является сложной циклической процедурой** (все пункты выше могут быть повторены).
### Классификация задач принятия решений

**Определяющим признаком классификации** может служить **степень определенности возможных исходов** или **последствия различных действий**, с которыми сталкивается *ЛПР*.
**Основные виды** задач принятия решений:
1. **Задачи принятия решений в условиях определенности** — в задачах этого типа все параметры модели считаются известными (детерменированными). Например, любые задачи оптимизации (поиск $min$, $max$) функции одной или даже нескольких переменных. Сюда также относятся задачи линейного программирования, задача коммивояжера (задано множество точек, матрица расстояний между ними, стартовая точка; необходимо построить кратчайший маршрут, соединяющий ее со всеми другими точками), задача составления расписаний;
2. **Задачи принятия решений в условиях риска** — для некоторых параметров модели (входных данных) неизвестны их точные значения, но известны их диапазоны изменения. Для каждого из таких параметров задается их плотность (функция, закон) распределения. Наилучшее решение выбирается при помощи наилучшего значения некоторого показателя эффективности (напр. среднее значение (иначе называемое математическим ожиданием), дисперсия (отклонение от среднего значения)). Сюда относятся задачи управления запасами, управления банковскими процессами, управления марковскими процессами, управления системами массового обслуживания;
3. **Задачи принятия решений в условиях неопределенности** — для некоторых параметров известны множества их значений, но неизвестны вероятности их появления и мы никаким образом не можем их найти. К таким задачам для каждого из параметров задаются их возможные дискретные значения и для них определяются значения показателя эффективности, соответствующие каждому из вариантов альтернативных решений. Задачу можно представить в виде матрицы (таблицы) принятия решений, строки которой соответствуют альтернативным решениям, а столбцы дискретным значениям параметров. $$\begin{pmatrix} & a_{1}& a_{2} & \dots & a_{m} \\ E_{1} & \alpha_{11} & \dots & \dots & \alpha_{1 m}  \\ E_{2} & \dots & \dots & \dots & \dots  \\ \dots  \\ E_{n} & \alpha_{n 1} & \dots & \dots & \alpha_{n m} \end{pmatrix}$$В качестве конкретного примера можно рассматривать задачу развития вычислительной сети университета, где альтернативные решения это различное число серверов ($E_i$ — различное число серверов, $a_{j}$ — различное число рабочих станций, тогда показателем эффективности $a_{i j}$ — производительность сети).
4. **Задачи принятия решений в конфликтных ситуациях** — принятие оптимального решения происходит в условиях неопределенности и наличия нескольких противоборствующих сторон. К данному типу задач относятся задачи теории игр.

Отметим, что перечисленные задачи **могут быть как однокритериальными, так и многокритериальными**. Различаются также **статические**, в которых время не учитывается, и **динамические**, в которых ситуация развивается во времени, задачи. Мы будем рассматривать в основном статические задачи. Любая реальная задача принятия решений **может представлять собой комбинацию** нескольких перечисленных типов задач.
# Практическое занятие — 04.09.2023
## Введение в теорию игр

В практической деятельности часто приходится сталкиваться с задачами, в которых **необходимо принимать решение в условиях конфликта**, то есть возникают ситуации, когда **сталкиваются две или более враждующих сторон**, преследующих, в общем, различные цели (не обязательно).
Такие ситуации и называют **конфликтными**. Конфликтная ситуация **порождается различием интересов** противоборствующих сторон и стремлением каждой из них принять оптимальное решение, которое максимально бы реализовало их цели.
Для **изучения и анализа конфликтных ситуаций** был создан специальный математический аппарат, называемый **теорией игр**.

В теории игр конфликтная ситуация **задается при помощи математической модели**: **стороны**, участвующие в конфликте; **правила игры**; **возможные варианты выигрыша** в этой игре.
Понятия «**игра**» и есть **математическая модель конфликтной ситуации**. Стороны, участвующие в игре (конфликте), называются **игроками**. Исход игры называют **выигрышем**. Для каждой игры вводятся **правила**, то есть система условий, определяющая:
* **Варианты действий** (альтернатив) игроков;
* **Объем информации каждого игрока о противнике**;
* **Выигрыш**, к которому приводит некоторая совокупность действий.
Если в игре сталкивается две стороны (игрока), то такую игру можно назвать **парной игрой**. Если же сталкивается больше двух сторон (игроков), то это **множественная игра**. В дальнейшем будет рассматривать преимущественно парные игры.
**Выбор и осуществление** одного из предусмотренных правилами игры действий называется **ходом игрока**. Ход игрока может быть:
* **Личным** — **осознанный выбор** игроком определенного варианта действий (напр. игра в шашки, шахматы);
* **Случайным** — **случайно выбранное действие** (напр. раздача карт из колоды в азартной игре в карты).
**Игры с случайными ходами** в теории игр **практически не рассматриваются**. **Игры с личными ходами** называются **стратегическими**.
**Стратегией игрока** называется **совокупность правил**, определяющих выбор его действий при каждом личном ходе в зависимости от сложившейся ситуации.
Игрок может **выбрать стратегию заранее** (до начала игры) или может ее выбирать в **процессе самой игры**.
**Задача теории игр** заключается в том, чтобы **рекомендовать игрокам определенные стратегии**, которые удовлетворяли бы **принципу (условию) оптимальности**: то есть, **один из игроков должен получить максимальный выигрыш**, когда другие придерживаются каких-то своих стратегий. Но **так должен действовать каждый игрок**. Исходя из принципов рационального поведения **каждый игрок должен стремиться к максимальному возможному выигрышу**.

**Игры классифицируются по многим признакам**:
* По **числу игроков**;
* По **количеству стратегий** (может быть конечное число стратегий или бесконечное  их число);
* По **характеру взаимоотношений** между игроками (возможен сговор);
* По **характеру выигрышей**;
* По **количеству ходов**;
* ...
### Матричная игра

**Матричная игра** — **простейший вид игры двух лиц**; **конечная** парная игра двух лиц с **нулевой суммой** (антагонистическая; **выигрыш одного из игроков** является **проигрышом другого игрока**).
**Цены игры** — **среднее значение** выигрыша.
### Формализация матричной игры

Два игрока: **игрок А**, **игрок Б**. Выигрыш игроков: $v_A$, $v_B$. **Определение** игры с нулевой суммой: $v_{A} + v_{B} = 0$.
**Стратегии игроков**:
* Игрок A: $A_{1}, \ \dots, \ A_{m}$
* Игрок B: $B_{1}, \ \dots, \ B_{n}$
Определяется $a_{i j}$ — **выигрыш игрока A**, соответствующий стратегии $A_{i}$ игрока А и стратегии $B_{j}$ игрока B.
**Матрица выигрышей** (платежная матрица) **игрока A**:
$$
P_{A}= \begin{pmatrix}
 & B_{1}& B_{2} & \dots & B_n \\
 A_{1}  & a_{11}  & \dots & \dots & a_{1 n}\\
 A_{2}  & \dots & \dots & \dots & \dots \\ 
 \dots  & \dots & \dots & \dots & \dots \\ 
 A_{m}  & a_{m 1} & a_{m 2} & \dots & a_{m n}
\end{pmatrix}
$$
**Мы не задаем** $P_B$, так как $P_{B} = -P_{A}$.
### Примеры матричных игр
#### Игра «в орлянку»

У каждого из игроков имеется по одной одинаковой монете (достоинство не важно), затем игроки подбрасывают монету, зажимают ее в кулак и одновременно разжимают пальцы. 
**Если монеты повернуты одинаковой стороной**, то **выигрывает игрок А**. **Если монеты повернуты разными сторонами**, то **выигрывает игрок Б**.
Формализуем эту игру. Имеется две стратегии: **Г**, **Р**.
$$
P_{A}= \begin{pmatrix}
 & Г & Р \\ 
 Г & 1 & -1 \\ 
 Р & -1 & 1
 \end{pmatrix} \implies P_{A} = \begin{pmatrix}
 1 & -1 \\ 
 -1 & 1
 \end{pmatrix}
$$

Игроки никак **не могут максимизировать свой выигрыш**. **Все зависит от случая**.
#### Игра «поиск»

**Игрок А** **может спрятаться в одном из двух убежищ**: убежище 1, убежище 2. **Игрок Б** **ищет игрока А** в одном из двух убежищ.
**Если игрок Б нашел игрока А**, то **он получает выигрыш**. А **если не нашел**, **игрок А получает выигрыш**.

$$
P_{A}= \begin{pmatrix}
 & Спрятался \ в \ Убежище \ 1 & Спрятался \ в \ Убежище \ 2 \\ 
 Ищет \ в \ Убежище \ 1 & -1 & 1 \\ 
 Ищет \ в \ Убежище \ 2 & 1 & -1
 \end{pmatrix}
$$
$$
P_{A} = \begin{pmatrix}
 -1 & 1 \\ 
 1 & -1
 \end{pmatrix}
$$
Если **поменять игроков ролями**, то ее матрица выигрышей **сведется к предыдущей**.
#### Игра «КНБ»

Два игрока должны **одновременно показать кулаком** или **камень**, или **ножницы**, или **бумагу**.
**Каждый игрок имеет три стратегии**: К, Н, Б.

$$
P_{A} = \begin{pmatrix}
 & К & Н & Б  \\ 
 К & 0  & 1 & -1 \\ 
 Н & -1 & 0 & 1 \\ 
 Б & 1 & -1  & 0
\end{pmatrix} \implies P_{A} = \begin{pmatrix}
0 & 1 & -1 \\ 
-1 & 0 & 1 \\ 
1 & -1 & 0
\end{pmatrix}
$$
#### Игра «на уклонение»

Игроки А и Б **выбирают целые числа от 1 до n**. При этом выигрыш игрока А равен $a_{i j} = |i - j|$
Составить матрицу при $n = 4$:

$$
P_{A} = \begin{pmatrix}
 & B_1 & B_2 & B_3 & B_4 \\ 
 A_1 & 0 & 1 & 2 & 3 \\ 
 A_2  & 1 & 0 & 1 & 2 \\ 
 A_3  & 2 & 1 & 0 & 1 \\ 
 A_4 & 3 & 2 & 1 & 0
\end{pmatrix}
$$
В отличие от предыдущих игр, здесь мы можем рекомендовать игроку А **первую и четвертую стратегию**, так как в них есть максимальное значение.
## Домашнее задание

Придумать любую матричную (антагонистическую) игру. Можно выполнять всей группой.
# Лекция — 11.09.2023

Укажем **принципы оптимальности для игроков матричной игры**.
**Решение игры**:
* Игрок А: если он выбрал стратегию $A_{i}$, то игрок Б выберет такую стратегию $B_{j}$, для которой выигрыш игрока А будет минимальным: $min \ a_{i j}$ ($1 \le j \le n$), далее игрок А максимизирует свой выигрыш по всем своим стратегиям $max \ min \ a_{i j}$ ($1 \le i \le m1 \le j \le n$) = $\underline{v}$ (**максимин** или нижняя цена игры — гарантированный выигрыш игрока А). Принцип выбора игроком А своей стратегии, основанный на максимизации минимального выигрыша, называют принципом максимина, а соответствующую стратегию максиминной. 
* Игрок Б: пусть он выбрал стратегию $B_{j}$, тогда А выбирает такую стратегию $A_{i}$, при которой выигрыш игрока А максимальный: $max \ a_{i j}$ ($1 \le i \le m$). После этого игрок Б может гарантировать себе минимальный проигрыш, который будет равен $min \ max \ a_{i j}$ ($1 \le j \le n 1 \le i \le m$) = $\overline{v}$ (**минимакс** или верхняя цена игры — минимальный проигрыш игрока Б)

**Цена игры** $v_{A}$ — средний выигрыш игрока А. В любой матричной игре всегда выполняется следующее неравенство:
$$\underline{v} \le v_{A} \le \overline{v}$$
Лемма. $\underline{v} \le \overline{v}$
Доказательство. $a_{i j} \le max \ a_{ij}$ ($1 \le i \le m$) $\implies$ $min \ a_{i j} \ (1 \le j \le n) \le min \ max \ a_{i j} = \overline{v}$
$\underline{v} = max \ min \ a_{i j} \implies \underline{v} \le \overline{v}$

## Ситуация равновесия в матричной $m \times n$ игре

Ситуацией равновесия в матричной игре называется такая ситуация, от которой невыгодно отклоняться каждому из игроков. Обозначим ситуацию равновесия таким образом: $(A_{i}^{*}, B_{i}^{*})$ или $(i^{*}, j^{*})$.
Ситуация называется равновесной (или седловой точкой), если одновременно выполняется следующее:
$$a_{i j^{*}} \le a_{i^{*} j^{*}}$$
$$a_{i^{*} j} \ge a_{i^{*} j^{*}}$$
$a_{i^{*} j^{*}} = v_{A}^{*}$ — выигрыш игрока A в ситуации $(i^{*}, j^{*})$
В ситуации равновесия: $v^{*} = \underline{v} = \overline{v}$. Если это равенство выполняется, то говорят, что игра имеет решение в чистых стратегиях. **Соответствующие максиминные и минимаксные стратегии игроков А и Б называются равновесными или оптимальными**.
Матричная игра может иметь или одну ситуацию равновесия, или несколько ситуаций равновесия, либо не иметь ни одной.
Если $(i_{1}^{*}, j_{1}^{*})$ и $(i_{2}^{*}, j_{2}^{*})$ — ситуации равновесия, то ситуации $(i_{1}^{*}, j_{2}^{*})$ и $(i_{2}^{*}, j_{1}^{*})$ также являются равновесными.

Пример:
$P = \begin{pmatrix} -5 & 3 & 1 & 20 & 3 \\ 5 & 5 & 4 & 6 & 4 \\ -4 & -2 & 0 & 0 & 2\end{pmatrix}$
Найти ситуацию равновесия. Найдем максимин и минимакс:
$\underline{v} = max \ \{ -5, 4, -4 \} = 4 \implies A_2$ — оптимальная стратегия
$\overline{v} = min \ \{ 5, 5, 4, 20, 4\} = 4 \implies B_{3}, B_{5}$ — оптимальные стратегии
Максимин равен минимаксу, следовательно, в игре есть ситуация равновесия.  И их две: $(A_{2}, B_{3})$ и $(A_{2}, B_{5})$ — ситуации равновесия.

## Смешанной расширение матричной игры

Смешанное расширение игры рассматривается в том случае, если $\underline{v} \le \overline{v}$.
В этом случае игрокам следует выбирать свои стратегии случайным образом. При этом не сообщая об этом противнику.

Случайная величина, значение которой является стратегией (ее номером) игроков, называется **смешанной стратегией**.

Зададим смешанные стратегии для матричной $(m \times n)$ игры.
Смешанной стратегией $x$ игрока А называется вектор: $x = (p_1, p_2, \dots, p_m)$, $0 \le p_i \le 1$, $\sum\limits_{i = 1}^{m} p_i = 1$, $p_i$ — вероятность выбора игроком $A_{i}$-ой стратегии.
Смешанной стратегией $y$ игрока А называется вектор: $y = (q_1, q_2, \dots, q_n)$, $0 \le q_i \le 1$, $\sum\limits_{j = 1}^{n} q_j = 1$, $q_j$ — вероятность выбора игроком $B_{j}$-ой стратегии.

Найдем выигрыш игрока А в ситуации $(x, y)$. В ситуации $(A_{i}, B_{j})$ выигрыш составляет $a_{i j} \implies a_{i j} p_{i} q_{j}$. Средний выигрыш будет равен:
$$H_{A} (x, y) = \sum\limits_{i = 1}^{m} \sum\limits_{j = 1}^{n} a_{i j} p_{i} q_{j} = x * P * y^{T}$$
Ситуацией ($x^{*}, y^{*}$) называется ситуация равновесия в смешанных стратегиях, а $x^{*}$ и $y^{*}$ — оптимальные (равновесные) смешанные стратегии игроков А и Б, если для всех $x$, $y$:
$$H_{A}(x, y) \le H_{A}(x^{*}, y^{*}) \le H_{A}(x^{*}, y)$$
Тогда цена игры $v_{A} = v^{*} = H_{A} (x^{*}, y^{*})$
Приведенной определение означает, что:
* $v_{A} = max_x \ min_y \ H_{A} (x, y) = min_y \ max_x \ H_{A} (x, y)$

### Основные теоремы теории игр

**Теорема (Джон фон Нейман)**: любая матричная игра имеет решение в смешанных стратегиях.
* Игрок А выбрал $i$-ую стратегию: $x^{(i)} = (i) = \{ 0, \dots, 0, 1, 0, \dots, 0 \}$
* То же самое для игрока Б

### Основные свойства оптимальных смешанных стратегий

1. Пусть $x^{*} = (p_1^{*}, \dots, p_m^{*})$ и $y^{*} = (q_1^{*}, \dots, q_n^{*})$ — оптимальные смешанные стратегии игроков А и Б, $v = H_{A}(x^{*}, y^{*})$ — цена игры. Тогда оптимальная смешанная стратегия $x^{*}$ игрока А (и аналогично для игрока Б) смешивается только из таких его чистых стратегий $A_{i}$, то есть отличны от нуля те вероятности $p_{i}$ те вероятности, для которых:
   $$v = H_{A}(i, y^{*}) = \sum\limits_{j = 1}^{n} a_{i j} q_{j}^{*}$$
   Оптимальная смешанная стратегия $y^{*}$ игрока Б смешивается из таких $B_{j}$, то есть отличны от нуля такие вероятности $q_{j}$, для которых:
   $$v = H_{A}(x^{*}, j) = \sum\limits_{i = 1}^{m} a_{i j} p_{i}^{*}$$
2. Для того, чтобы $(x^{*}, y^{*})$ была ситуацией равновесия, а $v = H_{A}(x^{*}, y^{*})$ — ценой игры, необходимо и достаточно, чтобы для любых $i=\overline{1, m}$, $j = \overline{1, n}$:   $$H_{A}(i, y^{*}) \le v \le H_{A}(x^{*}, j)$$
2. Для того, чтобы $(x^{*}, y^{*})$ была ситуацией равновесия, а $v = H_{A}(x^{*}, y^{*})$ — ценой игры, необходимо и достаточно, чтобы:   $$max_{i} H_{A}(i, y^{*}) = min_{j} H_{A} (x^{*}, j)$$
   или
   $$max_{i} min_{j} H_{a}(i, y) = min_{j} max_{x} H_{A}(x, j)$$
4. В матричной игре множества оптимальных смешанных стратегий игроков являются выпуклыми многогранниками (многоугольниками).
5. Пусть платежная матрица $P=(a_{i j})_{n \times n}$  является кососимметрической, то есть $a_{i j} = - a_{j i} (\forall i \ne j)$. Тогда оптимальные смешанные стратегии игроков А и Б совпадают: $x^{*}=y^{*}$ и цена игры равна нулю: $v^{*} = 0$